{% extends 'base.html.twig' %}

{% block title %}{{ topic.titre }}{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>{{ topic.titre }}</h1>
    <h3>ajouté le {{ topic.creation|date("d.m.Y") }} par {{ topic.auteur.username }}</h3>

    <p>{{ topic.description }}</p>

    <h2>Réponses</h2>
    {% if app.user %}
    {{ form_start(ReponseForm) }}
        {{ form_row(ReponseForm.contenu) }}
        <button type="submit">Envoyer</button>
    {{ form_end(ReponseForm) }}
    {% endif %}

    {% for reponse in reponses %}
        <hr>
        <h5>{{ reponse.auteur.username }}</h5>
        <p>{{ reponse.contenu }}</p>
        <p><small>Note: {% if reponse.noteGlobale is null %}N/A{% else %}{{ reponse.noteGlobale }}{% endif %}</small></p>
        {% if app.user %}<p>Cette réponse a-t-elle été utile? <a href="{{ path('useful', {id: reponse.id}) }}">Oui</a> &middot; <a href="{{ path('useless', {id: reponse.id}) }}">Non</a></p>{% endif %}
    {% endfor %}
</div>
{% endblock %}
